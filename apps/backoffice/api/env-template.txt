# Copy this file to .env and fill in the values

# Database Configuration
# =====================
# Database User: handled_user (for all connections)
# Local dev: Uses handled_dev database on localhost
# Production: Uses separate primary/data databases

# ┌─────────────────────────────────────────────────────────────────┐
# │  LOCAL DEVELOPMENT (Default)                                    │
# ├─────────────────────────────────────────────────────────────────┤
# │  1. Run: bash database/setup-dev-db.sh (one-time setup)         │
# │  2. Copy this file to .env (no changes needed!)                 │
# │  3. Both URLs use handled_user and point to handled_dev         │
# └─────────────────────────────────────────────────────────────────┘

SPLIT_DB_MODE=false
PRIMARY_DATABASE_URL="postgresql://handled_user@localhost:5432/handled_dev"
DATA_DATABASE_URL="postgresql://handled_user@localhost:5432/handled_dev"

# ┌─────────────────────────────────────────────────────────────────┐
# │  PRODUCTION (Split Database Setup)                              │
# ├─────────────────────────────────────────────────────────────────┤
# │  Set SPLIT_DB_MODE=true and configure separate databases:       │
# └─────────────────────────────────────────────────────────────────┘

# SPLIT_DB_MODE=true
# 
# # PRIMARY DATABASE (DBaaS - Digital Ocean Managed PostgreSQL)
# # Contains: config schema (auth, users, roles, permissions, integration_runs)
# #           customer schema (organizations, facilities, orders, shipments)
# PRIMARY_DATABASE_URL="postgresql://handled_user:PASSWORD@db-postgresql-nyc3-xxxxx.ondigitalocean.com:25060/handled_primary?sslmode=require&pgbouncer=true&connection_limit=15"
# 
# # DATA DATABASE (VPS Local PostgreSQL)
# # Contains: workspace schema (raw imports: us_zips, ups_zones, etc.)
# #           reference schema (transformed data: carriers, delivery_matrix, etc.)
# DATA_DATABASE_URL="postgresql://handled_user:PASSWORD@localhost:5432/handled_data"

# Server Configuration
# ====================
PORT=3001
HOST=0.0.0.0
NODE_ENV=production

# Authentication
# ==============
# Must be at least 32 characters for security
AUTH_SECRET="your-production-secret-key-must-be-at-least-32-characters-long"

# Optional: Session caching (enabled by default)
# SESSION_CACHE_TTL=30000  # milliseconds (default: 30 seconds)

# Optional: Logging
# LOG_LEVEL=info
# LOG_DB_QUERIES=false

# Backup Script Configuration (for VPS DATA DB backups)
# ======================================================
# Used by database/backup-data-db.sh and database/restore-data-db.sh
DATA_DB_HOST=localhost
DATA_DB_PORT=5432
DATA_DB_NAME=handled
DATA_DB_USER=handled_user
DATA_DB_PASSWORD=your_database_password

